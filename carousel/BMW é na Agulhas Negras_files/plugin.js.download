!function(e){var t={};function o(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=0)}([function(e,t){console.log("Duotalk Plugin Loaded","v0.1.21");var o={iframeUrl:"https://cdn-bucket-duotalk.s3.us-east-1.amazonaws.com/widget/chat.html",dev:!1,ldev:!1};null!=window.__dev&&(o.dev=!0),null!=window.__ldev&&(o.ldev=!0);var a=r("cb_session"),n={};if(n.dataLayer=window.__cb.dataLayer||null,n.whCustom=window.__cb.whCustom||null,n.widgetId=window.__cb.id||window.__dti||!1,n.widgetTemplateId=window.__cb.template||window.__dtt||!1,n.bind=window.__cb.bind||null,n.chatOpen=window.__cb.chatOpen||!1,n.forceShowChat=window.__cb.forceShowChat||!1,n.closeButton=null==window.__cb.closeButton,n.showBaloon=void 0!==window.__cb.showBaloon?window.__cb.showBaloon:!1===a,!0===window.__cb.hideBaloonMobile&&window.innerWidth<600&&(n.showBaloon=!1),d("cb_session"),n.sessionid=r("cb_session"),n.livechat=r("cb_livechat"),null!=window.__cb.hideLauncher&&(n.hideLauncher=!0),null!=window.__cb.contact&&"object"==typeof window.__cb.contact){var s=[];for(i in window.__cb.contact)"string"==typeof window.__cb.contact[i].type&&"whatsapp"===window.__cb.contact[i].type&&"number"==typeof window.__cb.contact[i].value&&s.push(window.__cb.contact[i].value);s.length>0&&(n.whatsapp=s.join(","))}var l=document.createElement("div"),c=document.createElement("iframe");function d(e,t=null,o=!1){var a,n=r(e),s=new Date;if(s.setTime(s.getTime()+(t||3e5)),a="; expires="+s.toGMTString(),!n||o){"cb_session"===e&&(localStorage.removeItem("dt__chatLead"),localStorage.removeItem("dt__chatOpened"),localStorage.removeItem("dt__chatTalk"),localStorage.removeItem("kpiLevel"),localStorage.removeItem("newMessagesCount"),localStorage.removeItem("botMessages"),localStorage.removeItem("botMessagesCount"),localStorage.removeItem("messageList"));var i=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));document.cookie=e+"="+i+a+"; path=/",localStorage.setItem(e,i)}else document.cookie=e+"="+n+a+"; path=/"}function r(e){let t=e+"=",o=decodeURIComponent(document.cookie).split(";");for(let e=0;e<o.length;e++){let a=o[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return!!localStorage.getItem("cb_session")&&localStorage.getItem("cb_session")}null===n.bind?(l.id="cb-duotalk",l.style="border: 0px; background-color: transparent; pointer-events: none; z-index: 2147483639; position: fixed; bottom: 0px; width: 95px; height: 95px; overflow: hidden; opacity: 1; right:0;",document.body.appendChild(l),c.id="cb-duotalk-chat-frame",c.style="pointer-events: all; background: none; border: 0px; float: none; position: absolute; top: 0px; right: 0px; bottom: 0px; left: 0px; width: 100%; height: 100%; margin: 0px; padding: 0px; min-height: 0px;"):(l.id="cb-duotalk"+window.__cb.bind,l.style="width: 100%; height: 100%;",document.getElementById(window.__cb.bind).appendChild(l),c.id="cb-duotalk-chat-frame"+window.__cb.bind,c.style="pointer-events: all;background: none;border: 0px;float: right;width: 100%;height: 100%;margin: 0px;padding: 0px;min-height: 0px;bottom: 0px;right:0px;"),c.src="".concat(o.iframeUrl,n.widgetTemplateId?"?template=":"?id=").concat(n.widgetTemplateId?n.widgetTemplateId:n.widgetId).concat("&chatOpen=").concat(n.chatOpen).concat(o.ldev?"&ldev=true":"").concat(n.sessionid?"&sessionid="+n.sessionid:"").concat(n.livechat?"&livechat=true":"").concat(o.dev?"&dev=true":"").concat("&closeButton=").concat(n.closeButton).concat(n.forceShowChat?"&forceShowChat=true":"").concat("&showBaloon="+n.showBaloon).concat(null!=n.hideLauncher?"&hideLauncher=true":"").concat(null!=n.whatsapp?"&whatsapp="+n.whatsapp:""),document.getElementById(l.id).appendChild(c),null===localStorage.getItem("messageList")&&(localStorage.setItem("messageList","[]"),localStorage.setItem("newMessagesCount",0),localStorage.setItem("botMessagesCount",0),localStorage.setItem("liveChatStatus","false")),window.addEventListener("message",(function(e){e.data.chatOpen&&localStorage.setItem("chatOpen",e.data.chatOpen);localStorage.getItem("chatOpen");if(null!=e.data.renewSessionid)return localStorage.removeItem("newMessagesCount"),localStorage.removeItem("botMessages"),localStorage.removeItem("botMessagesCount"),localStorage.removeItem("messageList"),localStorage.removeItem("liveChatStatus"),d("cb_session",null,!0),void c.contentWindow.postMessage({sessionID:r("cb_session")},"*");if(null!=e.data.endLiveChat)return localStorage.setItem("messageList","[]"),localStorage.setItem("newMessagesCount",0),localStorage.setItem("botMessagesCount",0),function(e){"cb_session"===e&&(localStorage.removeItem("dt__chatLead"),localStorage.removeItem("dt__chatOpened"),localStorage.removeItem("dt__chatTalk"),localStorage.removeItem("kpiLevel"),localStorage.removeItem("cb_session"));document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}("cb_livechat"),d("cb_session",null,!0),void c.contentWindow.postMessage({sessionID:r("cb_session")},"*");if(null!=e.data.startLiveChat)return d("cb_session",31556952e3),void d("cb_livechat",31556952e3);if(e.data.kpis){var t=[];t.chatSession=1,t.chatOpened=2,t.chatTalk=4,t.chatLead=8;var o=parseInt(localStorage.getItem("kpiLevel")||0);o<t[e.data.eventAction]&&(localStorage.setItem("kpiLevel",o+t[e.data.eventAction]),c.contentWindow.postMessage({sendKPI:t[e.data.eventAction]},"*"))}if(e.data.triggerGoogle&&"function"==typeof ga){var a=!1;ga((function(){a=!0}));var s="dt__"+e.data.eventAction;if(null!=localStorage.getItem(s))return;return localStorage.setItem(s,!0),void(void 0!==window.dataLayer?window.dataLayer.push({event:"Chatbot",eventCategory:"Chatbot",eventAction:e.data.eventAction}):a&&ga("send",{hitType:"event",eventCategory:"Chatbot",eventAction:e.data.eventAction}))}if(e.data.getSessionID)c.contentWindow.postMessage({sessionID:r("cb_session"),fullURL:window.location.href},"*");else{if(e.data.getMessageList){let e=localStorage.getItem("messageList");e||(e=!1),c.contentWindow.postMessage({getMessageList:e},"*")}if(e.data.setMessageList&&e.data.setMessageList.length>0){JSON.parse(e.data.setMessageList)>3&&d("cb_session",31556952e3),localStorage.setItem("messageList",e.data.setMessageList),c.contentWindow.postMessage({setMessageList:localStorage.getItem("messageList")},"*")}if(e.data.resetMessageList&&(localStorage.setItem("messageList",[]),c.contentWindow.postMessage({setMessageList:localStorage.getItem("messageList")},"*")),e.data.getNewMessagesCount){let e=localStorage.getItem("newMessagesCount");e||(e=!1),c.contentWindow.postMessage({getNewMessagesCount:e},"*")}if(e.data.setNewMessagesCount&&(localStorage.setItem("newMessagesCount",e.data.setNewMessagesCount),c.contentWindow.postMessage({setNewMessagesCount:localStorage.getItem("newMessagesCount")},"*")),e.data.getBotMessages){let e=localStorage.getItem("botMessages");e||(e=!1),c.contentWindow.postMessage({getBotMessages:e},"*")}if(e.data.setBotMessages&&(localStorage.setItem("botMessages",e.data.setBotMessages),c.contentWindow.postMessage({setBotMessages:localStorage.getItem("botMessages")},"*")),e.data.getBotMessagesCount){let e=localStorage.getItem("botMessagesCount");e||(e=!1),c.contentWindow.postMessage({getBotMessagesCount:e},"*")}if(e.data.setBotMessagesCount&&(localStorage.setItem("botMessagesCount",e.data.setBotMessagesCount),c.contentWindow.postMessage({setBotMessagesCount:localStorage.getItem("botMessagesCount")},"*")),e.data.getLiveChatStatus){let e=localStorage.getItem("liveChatStatus");e||(e=!1),c.contentWindow.postMessage({getLiveChatStatus:e},"*")}e.data.setLiveChatStatus&&(localStorage.setItem("liveChatStatus",e.data.setLiveChatStatus),c.contentWindow.postMessage({setLiveChatStatus:localStorage.getItem("liveChatStatus")},"*")),null!=e.data.ready&&c.contentWindow.postMessage(window.__cb,"*");var i,g=0,u=window.screen;"number"==typeof window.innerWidth?(i=window.innerWidth,g=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(i=document.documentElement.clientWidth,g=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)?(i=document.body.clientWidth,g=document.body.clientHeight):(i=u.width,g=u.height),null!==n.bind&&null!=document.getElementById(n.bind)&&(i=(u=document.getElementById(n.bind)).offsetWidth,g=u.offsetHeight>0?u.offsetHeight:"100%"),e.data.chatOpen?g=(i=i>450?"451px":"100%")>450?"590px":"100%":(null!=n.hideLauncher&&(e.data.width=0,e.data.height=0),e.data.width&&e.data.height&&(i=e.data.width+35+"px",g=e.data.height+"px"));var m=document.getElementById(l.id);null!==m&&i&&g&&void 0!==i&&void 0!==g&&(m.style.width=i,m.style.height=g,null!=e.data.widgetPosition&&"left"===e.data.widgetPosition&&(m.style.left=0,m.style.right=null))}}),!1)}]);